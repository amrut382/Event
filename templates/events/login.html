{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Login - Event Booking Platform{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/auth.css' %}">
<style>
    body { padding-top: 0; }
    .footer { display: none; }
</style>
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-background">
        <div class="auth-shape auth-shape-1"></div>
        <div class="auth-shape auth-shape-2"></div>
        <div class="auth-shape auth-shape-3"></div>
        <div class="auth-shape auth-shape-4"></div>
    </div>
    
    <div class="auth-card">
        <div class="auth-card-wrapper">
            <!-- Left Side - Branding -->
            <div class="auth-left">
                <div class="auth-left-content">
                    <div class="auth-logo">
                        <i class="bi bi-calendar-event"></i>
                    </div>
                    <h1 class="auth-title-left">Welcome Back!</h1>
                    <p class="auth-subtitle-left">Login to access your account and continue booking amazing events.</p>
                    <div class="auth-features">
                        <div class="auth-feature-item">
                            <div class="auth-feature-icon">
                                <i class="bi bi-shield-check"></i>
                            </div>
                            <span class="auth-feature-text">Secure Login</span>
                        </div>
                        <div class="auth-feature-item">
                            <div class="auth-feature-icon">
                                <i class="bi bi-lightning-charge"></i>
                            </div>
                            <span class="auth-feature-text">Quick Access</span>
                        </div>
                        <div class="auth-feature-item">
                            <div class="auth-feature-icon">
                                <i class="bi bi-calendar-check"></i>
                            </div>
                            <span class="auth-feature-text">Manage Bookings</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Side - Login Form -->
            <div class="auth-right">
                <div class="auth-header">
                    <h2 class="auth-title">Login</h2>
                    <p class="auth-subtitle">Sign in to your account</p>
                </div>
                
                <form method="post" class="auth-form">
                    {% csrf_token %}
                    
                    <div class="form-group-auth">
                        <label class="form-label-auth">
                            <i class="bi bi-person me-2"></i>Username
                        </label>
                        <div class="input-icon-wrapper">
                            <input type="text" name="username" class="form-control-auth" placeholder="Enter your username" required autofocus>
                            <i class="bi bi-person input-icon"></i>
                        </div>
                        {% if form.username.errors %}
                            <div class="error-message">
                                <i class="bi bi-exclamation-circle"></i>
                                {{ form.username.errors.0 }}
                            </div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group-auth">
                        <label class="form-label-auth">
                            <i class="bi bi-lock me-2"></i>Password
                        </label>
                        <div class="input-icon-wrapper">
                            <input type="password" name="password" id="password" class="form-control-auth" placeholder="Enter your password" required>
                            <i class="bi bi-lock input-icon"></i>
                            <button type="button" class="password-toggle" onclick="togglePassword('password')">
                                <i class="bi bi-eye" id="password-toggle-icon"></i>
                            </button>
                        </div>
                        {% if form.password.errors %}
                            <div class="error-message">
                                <i class="bi bi-exclamation-circle"></i>
                                {{ form.password.errors.0 }}
                            </div>
                        {% endif %}
                    </div>
                    
                    {% if form.non_field_errors %}
                        <div class="error-message mb-3">
                            <i class="bi bi-exclamation-triangle"></i>
                            {{ form.non_field_errors.0 }}
                        </div>
                    {% endif %}
                    
                    <div class="form-group-auth">
                        <div class="captcha-wrapper">
                            <label class="form-label-auth mb-2">Security Check</label>
                            {{ form.captcha }}
                            {% if form.captcha.errors %}
                                <div class="error-message mt-2">
                                    <i class="bi bi-exclamation-circle"></i>
                                    {{ form.captcha.errors.0 }}
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-auth-submit" id="login-submit">
                        <span class="btn-text">Login</span>
                        <i class="bi bi-arrow-right ms-2"></i>
                    </button>
                </form>
                
                <div class="auth-link">
                    Don't have an account? <a href="{% url 'register' %}{% if next_url and next_url != 'home' %}?next={{ next_url }}{% endif %}">Create one here</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/auth.js' %}"></script>
{% endblock %}

